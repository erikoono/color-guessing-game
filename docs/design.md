# 色当てゲーム 詳細設計書

## 画面設計

### 1. ゲーム画面

#### 構成要素

| 要素 | 説明 | 動作 |
|------|------|------|
| タイトル | 「色当てゲーム」または「Color Guessing Game」 | 言語設定に応じて表示が変わる |
| 言語切替ボタン | 「English」または「日本語」 | クリックで言語が切り替わる |
| 色表示エリア | 当てるべき色が表示される | 問題ごとにランダムな色が表示される |
| 選択肢ボタン | 色の名前（日本語/英語） | クリックで回答、正解/不正解が表示される |
| メッセージ表示エリア | 「正解！」「不正解！」などのメッセージ | 回答後に表示される |
| 「つぎへ」ボタン | 「つぎへ」または「Next」 | 回答後に表示され、クリックで次の問題に進む |

#### 状態遷移

1. 初期状態: 色表示、選択肢ボタンが表示される
2. 回答後: メッセージと「つぎへ」ボタンが表示される
3. 「つぎへ」クリック後: 次の問題が表示される

### 2. 結果画面

#### 構成要素

| 要素 | 説明 | 動作 |
|------|------|------|
| 結果タイトル | 「ゲームしゅうりょう！」または「Game Complete!」 | 言語設定に応じて表示が変わる |
| 正解数表示 | 「せいかい: X/10もん」または「Correct: X/10」 | 10問中の正解数を表示 |
| 「もういっかいやる！」ボタン | 「もういっかいやる！」または「Play Again!」 | クリックでゲームをリセットし、最初から始める |

#### 状態遷移

1. 10問回答後: 結果画面が表示される
2. 「もういっかいやる！」クリック後: ゲーム画面に戻る

## API設計

### 1. 色情報取得 API

#### リクエスト

```
GET /api/color?count={count}
```

| パラメータ | 型 | 必須 | 説明 |
|-----------|----|----|------|
| count | 数値 | 任意 | 選択肢の数（デフォルト: 3） |

#### レスポンス

```json
{
  "options": ["赤", "青", "黄"],
  "correct": "赤"
}
```

| フィールド | 型 | 説明 |
|-----------|----|----|
| options | 文字列配列 | 選択肢となる色の名前の配列 |
| correct | 文字列 | 正解の色の名前 |

#### 処理内容

1. `count`パラメータに基づいて、選択肢の数を決定する（デフォルト: 3）
2. 全色リスト（赤、青、黄、緑、紫、オレンジ）からランダムに`count`個の色を選択
3. 選択した色の中からランダムに1つを正解として設定
4. 選択肢と正解をJSONで返却

## データモデル

### 色データ

| 日本語 | 英語 | CSS色名 |
|-------|-----|--------|
| 赤 | red | red |
| 青 | blue | blue |
| 黄 | yellow | yellow |
| 緑 | green | green |
| 紫 | purple | purple |
| オレンジ | orange | orange |

## 状態管理

### フロントエンド（React）の状態

| 状態変数 | 型 | 説明 |
|---------|----|----|
| colors | 文字列配列 | 選択肢の色の配列 |
| correctColor | 文字列 | 正解の色 |
| message | 文字列 | 表示するメッセージ |
| language | 文字列 | 現在の言語設定（"ja"または"en"） |
| correctCount | 数値 | 正解数 |
| questionCount | 数値 | 問題数 |
| gameComplete | 真偽値 | ゲーム完了フラグ |
| isCorrect | 真偽値 | 正解フラグ |
| answered | 真偽値 | 回答済みフラグ |

## 多言語対応

### 対応言語

- 日本語（デフォルト）
- 英語

### 翻訳データ

| キー | 日本語 | 英語 |
|-----|-------|-----|
| title | いろあてゲーム | Color Guessing Game |
| correct | せいかい！ | Correct! |
| incorrect | ちがうよ！ | Incorrect! |
| next | つぎへ | Next |
| gameComplete | ゲームしゅうりょう！ | Game Complete! |
| correctCount | せいかい: {count}/10もん | Correct: {count}/10 |
| playAgain | もういっかいやる！ | Play Again! |